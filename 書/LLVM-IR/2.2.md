## 2.2 函數（Function）與基本塊（Basic Block）

在 LLVM IR 中，函數（Function）是程式的基本組成單位。每個函數都具有一個名稱和一個返回類型，並可能帶有輸入參數。函數的定義包含了函數的主體，也就是函數內的程式碼。

在函數的主體中，程式碼被組織成基本塊（Basic Block）的集合。基本塊是一段程式碼的連續序列，它由一個進入點和一個離開點構成。基本塊的進入點只有一個，但離開點可以有多個，可以是函數結束或跳轉到其他基本塊。基本塊中的程式碼是按照順序執行的，不能有跳轉指令。

基本塊之間的跳轉可以藉由條件判斷和無條件跳轉指令實現。條件判斷指令用於根據條件結果決定接下來要執行的基本塊。無條件跳轉指令則用於直接跳轉到特定的基本塊，而不需要條件判斷。

基本塊內的程式碼可以是任意的 LLVM IR 指令，包括算術運算、載入和儲存指令、轉換指令等。每個指令都有一個操作碼（Opcode）、運算元（Operand）和結果（Result）。操作碼指定指令的功能，運算元是指令操作的數據源，結果則是指令的計算結果。指令之間存在依賴關係，必須按照依賴關係的順序執行。

基本塊和函數之間的關係可以用圖形表示，稱為控制流圖（Control Flow Graph, CFG）。在 CFG 中，每個基本塊表示為一個節點，基本塊之間的跳轉關係表示為邊。控制流圖可以幫助我們理解程式的結構和控制流程，並進一步優化程式碼的效能。

總的來說，函數和基本塊是 LLVM IR 中重要的概念。函數是程式的基本組成單位，而基本塊是程式碼執行的基本單元。通過組織程式碼成函數和基本塊，我們能夠更好地分析程式結構和優化程式碼的效能。